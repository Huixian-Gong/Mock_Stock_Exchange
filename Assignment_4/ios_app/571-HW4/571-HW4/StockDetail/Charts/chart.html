<!DOCTYPE html>
<html>
    <head>
        <script src="https://code.highcharts.com/stock/highstock.js"></script>
        <script src="https://code.highcharts.com/stock/modules/accessibility.js"></script>
        <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/stock/modules/export-data.js"></script>
        <script src="https://code.highcharts.com/stock/indicators/indicators.js"></script>
        <script src="https://code.highcharts.com/stock/indicators/volume-by-price.js"></script>
        <style>
            body, html {
                margin: 0;
                padding: 0;
                height: 100%;
                overflow: hidden;  /* Disable scrollbars */
            }
            #container {
                height: 100%;
                min-width: 310px; /* Minimum width of the chart */
                width: 100%;      /* This ensures that chart is full-width */
            }
        </style>
    </head>
    <body>
        <div id="container"></div>
        <script>
            const
                groupingUnits = [[
                    'week',                         // unit name
                    [1]                             // allowed multiples
                ], [
                    'month',
                    [1, 2, 3, 4, 6]
                ]];
            function loadChartData(chartData, volumeData, ticker) {
                Highcharts.stockChart('container', {
                    rangeSelector: {selected: 2},
                    title: {text: ticker + ' Historical'},
                    subtitle: {text: 'With SMA and Volume by Price technical indicators'},
                    yAxis: [{
                        startOnTick: false,
                        endOnTick: false,
                        labels: {align: 'right', x: -3},
                        title: {text: 'OHLC'},
                        height: '60%',
                        lineWidth: 2,
                        resize: {enabled: true}
                    }, {
                        labels: {align: 'right', x: -3},
                        title: {text: 'Volume'},
                        top: '65%',
                        height: '35%',
                        offset: 0,
                        lineWidth: 2
                    }],
                    tooltip: {split: true},
                    plotOptions: {
                            series: {
                                dataGrouping: {
                                    units: groupingUnits
                                }
                            }
                        },
                    legend: {
                        enabled: false  /* This line turns off the legend display */
                    },
                    rangeSelector: {
                        selected: 2,
                        inputEnabled: true,
                        enabled: true,
                    },
                    
                    
                    series: [{
                        type: 'candlestick',
                        name: ticker,
                        id: 'aapl',
                        zIndex: 2,
                        data: chartData,
                    }, {
                        type: 'column',
                        name: 'Volume',
                        id: 'volume',
                        yAxis: 1,
                        data: volumeData
                    }, {
                        type: 'vbp',
                        linkedTo: 'aapl',
                        params: {volumeSeriesID: 'volume'},
                        dataLabels: {enabled: false},
                        zoneLines: {enabled: false}
                    }, {
                        type: 'sma',
                        linkedTo: 'aapl',
                        zIndex: 1,
                        marker: {enabled: false}
                    },
                             ]
                });
            }
        </script>
    </body>
</html>
